Started by user [8mha:////4C+RzKgWyO49TbLkHnIaiOjSo6AQdkn++EA3bnXLG0NwAAAAmB+LCAAAAAAAAP9b85aBtbiIQTGjNKU4P08vOT+vOD8nVc83PyU1x6OyILUoJzMv2y+/JJUBAhiZGBgqihhk0NSjKDWzXb3RdlLBUSYGJk8GtpzUvPSSDB8G5tKinBIGIZ+sxLJE/ZzEvHT94JKizLx0a6BxUmjGOUNodHsLgAy2EgYe/dLi1CL9lMTs4oxEAMbOizvBAAAA[0mdaksha
Building in workspace /var/lib/jenkins/workspace/GCPApplicationDeploy
 > git rev-parse --is-inside-work-tree # timeout=10
Fetching changes from the remote Git repository
 > git config remote.origin.url https://github.com/daksha25/GCPDeployment.git # timeout=10
Fetching upstream changes from https://github.com/daksha25/GCPDeployment.git
 > git --version # timeout=10
using GIT_ASKPASS to set credentials 
 > git fetch --tags --progress https://github.com/daksha25/GCPDeployment.git +refs/heads/*:refs/remotes/origin/*
 > git rev-parse refs/remotes/origin/master^{commit} # timeout=10
 > git rev-parse refs/remotes/origin/origin/master^{commit} # timeout=10
Checking out Revision 7a66782323fe17f8cc1aaaa4e6fa5f61f8cde088 (refs/remotes/origin/master)
 > git config core.sparsecheckout # timeout=10
 > git checkout -f 7a66782323fe17f8cc1aaaa4e6fa5f61f8cde088
Commit message: "Update hibernate.cfg.xml"
 > git rev-list --no-walk 3807c3739efb3975530563438e6f98340f7422e0 # timeout=10
[GCPApplicationDeploy] $ /bin/sh -xe /tmp/jenkins3729325861669805167.sh
+ mvn clean install
[[1;34mINFO[m] Scanning for projects...
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m------------------------------------------------------------------------[m
[[1;34mINFO[m] [1mBuilding Pid_G_v8.0 0.0.1-SNAPSHOT[m
[[1;34mINFO[m] [1m------------------------------------------------------------------------[m
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-clean-plugin:2.5:clean[m [1m(default-clean)[m @ [36mPid_G_v8.0[0;1m ---[m
[[1;34mINFO[m] Deleting /var/lib/jenkins/workspace/GCPApplicationDeploy/target
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-resources-plugin:2.6:resources[m [1m(default-resources)[m @ [36mPid_G_v8.0[0;1m ---[m
[[1;33mWARNING[m] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
[[1;34mINFO[m] Copying 3 resources
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-compiler-plugin:3.6.1:compile[m [1m(default-compile)[m @ [36mPid_G_v8.0[0;1m ---[m
[[1;34mINFO[m] Changes detected - recompiling the module!
[[1;33mWARNING[m] File encoding has not been set, using platform encoding UTF-8, i.e. build is platform dependent!
[[1;34mINFO[m] Compiling 24 source files to /var/lib/jenkins/workspace/GCPApplicationDeploy/target/classes
[[1;34mINFO[m] /var/lib/jenkins/workspace/GCPApplicationDeploy/src/com/DAO/ErrorRepositoryDAoImpl.java: /var/lib/jenkins/workspace/GCPApplicationDeploy/src/com/DAO/ErrorRepositoryDAoImpl.java uses unchecked or unsafe operations.
[[1;34mINFO[m] /var/lib/jenkins/workspace/GCPApplicationDeploy/src/com/DAO/ErrorRepositoryDAoImpl.java: Recompile with -Xlint:unchecked for details.
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-resources-plugin:2.6:testResources[m [1m(default-testResources)[m @ [36mPid_G_v8.0[0;1m ---[m
[[1;33mWARNING[m] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
[[1;34mINFO[m] skip non existing resourceDirectory /var/lib/jenkins/workspace/GCPApplicationDeploy/src/test/resources
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-compiler-plugin:3.6.1:testCompile[m [1m(default-testCompile)[m @ [36mPid_G_v8.0[0;1m ---[m
[[1;34mINFO[m] No sources to compile
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-surefire-plugin:2.12.4:test[m [1m(default-test)[m @ [36mPid_G_v8.0[0;1m ---[m
[[1;34mINFO[m] No tests to run.
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-war-plugin:3.0.0:war[m [1m(default-war)[m @ [36mPid_G_v8.0[0;1m ---[m
[[1;34mINFO[m] Packaging webapp
[[1;34mINFO[m] Assembling webapp [Pid_G_v8.0] in [/var/lib/jenkins/workspace/GCPApplicationDeploy/target/Pid_G_v8.0-0.0.1-SNAPSHOT]
[[1;34mINFO[m] Processing war project
[[1;34mINFO[m] Copying webapp resources [/var/lib/jenkins/workspace/GCPApplicationDeploy/WebContent]
[[1;34mINFO[m] Webapp assembled in [241 msecs]
[[1;34mINFO[m] Building war: /var/lib/jenkins/workspace/GCPApplicationDeploy/target/infybank.war
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-install-plugin:2.4:install[m [1m(default-install)[m @ [36mPid_G_v8.0[0;1m ---[m
[[1;34mINFO[m] Installing /var/lib/jenkins/workspace/GCPApplicationDeploy/target/infybank.war to /var/lib/jenkins/.m2/repository/Pid_G_v8/0/Pid_G_v8.0/0.0.1-SNAPSHOT/Pid_G_v8.0-0.0.1-SNAPSHOT.war
[[1;34mINFO[m] Installing /var/lib/jenkins/workspace/GCPApplicationDeploy/pom.xml to /var/lib/jenkins/.m2/repository/Pid_G_v8/0/Pid_G_v8.0/0.0.1-SNAPSHOT/Pid_G_v8.0-0.0.1-SNAPSHOT.pom
[[1;34mINFO[m] [1m------------------------------------------------------------------------[m
[[1;34mINFO[m] [1;32mBUILD SUCCESS[m
[[1;34mINFO[m] [1m------------------------------------------------------------------------[m
[[1;34mINFO[m] Total time: 5.880 s
[[1;34mINFO[m] Finished at: 2018-10-29T08:53:01Z
[[1;34mINFO[m] Final Memory: 23M/248M
[[1;34mINFO[m] [1m------------------------------------------------------------------------[m
+ docker build -t daksha25/infybankapp:6 .
free(): invalid pointer
SIGABRT: abort
PC=0x7fa1e35fde97 m=0 sigcode=18446744073709551610
signal arrived during cgo execution

goroutine 1 [syscall, locked to thread]:
runtime.cgocall(0x4afd50, 0xc42004dcc0, 0xc42004dce8)
	/usr/lib/go-1.8/src/runtime/cgocall.go:131 +0xe2 fp=0xc42004dc90 sp=0xc42004dc50
github.com/docker/docker-credential-helpers/secretservice._Cfunc_free(0x214e270)
	github.com/docker/docker-credential-helpers/secretservice/_obj/_cgo_gotypes.go:111 +0x41 fp=0xc42004dcc0 sp=0xc42004dc90
github.com/docker/docker-credential-helpers/secretservice.Secretservice.List.func5(0x214e270)
	/build/golang-github-docker-docker-credential-helpers-cMhSy1/golang-github-docker-docker-credential-helpers-0.5.0/obj-x86_64-linux-gnu/src/github.com/docker/docker-credential-helpers/secretservice/secretservice_linux.go:96 +0x60 fp=0xc42004dcf8 sp=0xc42004dcc0
github.com/docker/docker-credential-helpers/secretservice.Secretservice.List(0x0, 0x756060, 0xc4200622c0)
	/build/golang-github-docker-docker-credential-helpers-cMhSy1/golang-github-docker-docker-credential-helpers-0.5.0/obj-x86_64-linux-gnu/src/github.com/docker/docker-credential-helpers/secretservice/secretservice_linux.go:97 +0x217 fp=0xc42004dda0 sp=0xc42004dcf8
github.com/docker/docker-credential-helpers/secretservice.(*Secretservice).List(0x77e548, 0xc42004de88, 0x410022, 0xc420062220)
	<autogenerated>:4 +0x46 fp=0xc42004dde0 sp=0xc42004dda0
github.com/docker/docker-credential-helpers/credentials.List(0x756ba0, 0x77e548, 0x7560e0, 0xc420080008, 0x0, 0x10)
	/build/golang-github-docker-docker-credential-helpers-cMhSy1/golang-github-docker-docker-credential-helpers-0.5.0/obj-x86_64-linux-gnu/src/github.com/docker/docker-credential-helpers/credentials/credentials.go:145 +0x3e fp=0xc42004de68 sp=0xc42004dde0
github.com/docker/docker-credential-helpers/credentials.HandleCommand(0x756ba0, 0x77e548, 0x7ffdce1c1835, 0x4, 0x7560a0, 0xc420080000, 0x7560e0, 0xc420080008, 0x40e398, 0x4d35c0)
	/build/golang-github-docker-docker-credential-helpers-cMhSy1/golang-github-docker-docker-credential-helpers-0.5.0/obj-x86_64-linux-gnu/src/github.com/docker/docker-credential-helpers/credentials/credentials.go:60 +0x16d fp=0xc42004ded8 sp=0xc42004de68
github.com/docker/docker-credential-helpers/credentials.Serve(0x756ba0, 0x77e548)
	/build/golang-github-docker-docker-credential-helpers-cMhSy1/golang-github-docker-docker-credential-helpers-0.5.0/obj-x86_64-linux-gnu/src/github.com/docker/docker-credential-helpers/credentials/credentials.go:41 +0x1cb fp=0xc42004df58 sp=0xc42004ded8
main.main()
	/build/golang-github-docker-docker-credential-helpers-cMhSy1/golang-github-docker-docker-credential-helpers-0.5.0/secretservice/cmd/main_linux.go:9 +0x4f fp=0xc42004df88 sp=0xc42004df58
runtime.main()
	/usr/lib/go-1.8/src/runtime/proc.go:185 +0x20a fp=0xc42004dfe0 sp=0xc42004df88
runtime.goexit()
	/usr/lib/go-1.8/src/runtime/asm_amd64.s:2197 +0x1 fp=0xc42004dfe8 sp=0xc42004dfe0

goroutine 17 [syscall, locked to thread]:
runtime.goexit()
	/usr/lib/go-1.8/src/runtime/asm_amd64.s:2197 +0x1

rax    0x0
rbx    0x7ffdce1c0820
rcx    0x7fa1e35fde97
rdx    0x0
rdi    0x2
rsi    0x7ffdce1c05b0
rbp    0x7ffdce1c0920
rsp    0x7ffdce1c05b0
r8     0x0
r9     0x7ffdce1c05b0
r10    0x8
r11    0x246
r12    0x7ffdce1c0820
r13    0x1000
r14    0x0
r15    0x30
rip    0x7fa1e35fde97
rflags 0x246
cs     0x33
fs     0x0
gs     0x0
Sending build context to Docker daemon  92.72MB
Step 1/5 : FROM tomcat:8.5
 ---> 05af71dd9251
Step 2/5 : COPY /target/infybank.war /usr/local/tomcat/webapps
 ---> 8e92a4af7ec6
Step 3/5 : WORKDIR /usr/local/tomcat
 ---> Running in 97ee73b9f77a
Removing intermediate container 97ee73b9f77a
 ---> 97e6093004c6
Step 4/5 : RUN chmod +x bin/catalina.sh
 ---> Running in 3782678afbb8
Removing intermediate container 3782678afbb8
 ---> 639c0922a916
Step 5/5 : CMD ["bin/catalina.sh", "run"]
 ---> Running in fceaf27b71b1
Removing intermediate container fceaf27b71b1
 ---> f65f37f3cb29
Successfully built f65f37f3cb29
Successfully tagged daksha25/infybankapp:6
Docker Build
Docker Build: building image at path /var/lib/jenkins/workspace/GCPApplicationDeploy
Step 1/5 : FROM tomcat:8.5


 ---> 05af71dd9251

Step 2/5 : COPY /target/infybank.war /usr/local/tomcat/webapps


 ---> Using cache

 ---> 8e92a4af7ec6

Step 3/5 : WORKDIR /usr/local/tomcat


 ---> Using cache

 ---> 97e6093004c6

Step 4/5 : RUN chmod +x bin/catalina.sh


 ---> Using cache

 ---> 639c0922a916

Step 5/5 : CMD ["bin/catalina.sh", "run"]


 ---> Using cache

 ---> f65f37f3cb29

Successfully built f65f37f3cb29

Tagging built image with daksha25/infybankapp:6
Docker Build Response : f65f37f3cb29
Pushing [daksha25/infybankapp:6]
The push refers to repository [docker.io/daksha25/infybankapp]
ded5ea358f5a: Preparing
452c106cb6d5: Preparing
1a9d06dd524f: Preparing
de6d5c01d209: Preparing
4c67d93ae2ce: Preparing
b0b6904b7998: Preparing
ceaed1136256: Preparing
923bc9a5d019: Preparing
185c62a48a71: Preparing
d683471ab65a: Preparing
0f25831f224d: Preparing
08a01612ffca: Preparing
8bb25f9cdc41: Preparing
f715ed19c28b: Preparing
923bc9a5d019: Waiting
185c62a48a71: Waiting
d683471ab65a: Waiting
0f25831f224d: Waiting
08a01612ffca: Waiting
8bb25f9cdc41: Waiting
f715ed19c28b: Waiting
b0b6904b7998: Waiting
ceaed1136256: Waiting
1a9d06dd524f: Layer already exists
4c67d93ae2ce: Layer already exists
de6d5c01d209: Layer already exists
452c106cb6d5: Pushing [>                                                  ]  264.7kB/24.22MB
ded5ea358f5a: Layer already exists
452c106cb6d5: Pushing [=>                                                 ]    789kB/24.22MB
b0b6904b7998: Layer already exists
923bc9a5d019: Layer already exists
ceaed1136256: Layer already exists
452c106cb6d5: Pushing [===>                                               ]  1.575MB/24.22MB
452c106cb6d5: Pushing [========>                                          ]  4.197MB/24.22MB
452c106cb6d5: Pushing [=============>                                     ]  6.556MB/24.22MB
452c106cb6d5: Pushing [================>                                  ]  8.129MB/24.22MB
185c62a48a71: Layer already exists
08a01612ffca: Layer already exists
452c106cb6d5: Pushing [===================>                               ]   9.44MB/24.22MB
d683471ab65a: Layer already exists
0f25831f224d: Layer already exists
452c106cb6d5: Pushing [========================>                          ]  12.06MB/24.22MB
452c106cb6d5: Pushing [==============================>                    ]  14.68MB/24.22MB
452c106cb6d5: Pushing [===================================>               ]  17.04MB/24.22MB
8bb25f9cdc41: Layer already exists
f715ed19c28b: Layer already exists
452c106cb6d5: Pushing [======================================>            ]  18.88MB/24.22MB
452c106cb6d5: Pushing [============================================>      ]   21.5MB/24.22MB
452c106cb6d5: Pushing [=================================================> ]  24.12MB/24.22MB
452c106cb6d5: Pushing [==================================================>]  24.23MB
452c106cb6d5: Pushed
6: digest: sha256:3bf959e9804418b7fba68ddd49356c8cc875106288d4e9bcf49c55ff8b912c26 size: 3256
Cleaning local images [f65f37f3cb29]
Docker Build Done
[GCPApplicationDeploy] $ /bin/sh -xe /tmp/jenkins713467715108153818.sh
+ gcloud container clusters create bankappdeploy --zone us-west1-b
WARNING: Starting in 1.12, new clusters will have basic authentication disabled by default. Basic authentication can be enabled (or disabled) manually using the `--[no-]enable-basic-auth` flag.
WARNING: Starting in 1.12, new clusters will not have a client certificate issued. You can manually enable (or disable) the issuance of the client certificate using the `--[no-]issue-client-certificate` flag.
WARNING: Currently VPC-native is not the default mode during cluster creation. In the future, this will become the default mode and can be disabled using `--no-enable-ip-alias` flag. Use `--[no-]enable-ip-alias` flag to suppress this warning.
WARNING: Starting in 1.12, default node pools in new clusters will have their legacy Compute Engine instance metadata endpoints disabled by default. To create a cluster with legacy instance metadata endpoints disabled in the default node pool, run `clusters create` with the flag `--metadata disable-legacy-endpoints=true`.
This will enable the autorepair feature for nodes. Please see https://cloud.google.com/kubernetes-engine/docs/node-auto-repair for more information on node autorepairs.
WARNING: Starting in Kubernetes v1.10, new clusters will no longer get compute-rw and storage-ro scopes added to what is specified in --scopes (though the latter will remain included in the default --scopes). To use these scopes, add them explicitly to --scopes. To use the new behavior, set container/new_scopes_behavior property (gcloud config set container/new_scopes_behavior true).
Creating cluster bankappdeploy in us-west1-b...
..................................................................................................................................done.
Created [https://container.googleapis.com/v1/projects/ci-cd-poc-218510/zones/us-west1-b/clusters/bankappdeploy].
To inspect the contents of your cluster, go to: https://console.cloud.google.com/kubernetes/workload_/gcloud/us-west1-b/bankappdeploy?project=ci-cd-poc-218510
kubeconfig entry generated for bankappdeploy.
NAME           LOCATION    MASTER_VERSION  MASTER_IP      MACHINE_TYPE   NODE_VERSION  NUM_NODES  STATUS
bankappdeploy  us-west1-b  1.9.7-gke.6     35.233.224.37  n1-standard-1  1.9.7-gke.6   3          RUNNING
+ gcloud container clusters get-credentials bankappdeploy --zone us-west1-b --project ci-cd-poc-218510
Fetching cluster endpoint and auth data.
kubeconfig entry generated for bankappdeploy.
+ kubectl run appdeploy --image=daksha25/infybankapp:6 --port=8080
kubectl run --generator=deployment/apps.v1beta1 is DEPRECATED and will be removed in a future version. Use kubectl create instead.
deployment.apps/appdeploy created
+ kubectl get deployment
NAME        DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
appdeploy   1         1         1            0           1s
+ kubectl get pods
NAME                         READY   STATUS              RESTARTS   AGE
appdeploy-7f95ddcbdf-fhc6m   0/1     ContainerCreating   0          0s
+ kubectl expose deployment appdeploy --type=LoadBalancer
service/appdeploy exposed
+ kubectl get services appdeploy
NAME        TYPE           CLUSTER-IP      EXTERNAL-IP   PORT(S)          AGE
appdeploy   LoadBalancer   10.19.246.115   <pending>     8080:31259/TCP   0s
+ kubectl get services
NAME         TYPE           CLUSTER-IP      EXTERNAL-IP   PORT(S)          AGE
appdeploy    LoadBalancer   10.19.246.115   <pending>     8080:31259/TCP   0s
kubernetes   ClusterIP      10.19.240.1     <none>        443/TCP          57s
Finished: SUCCESS
