Started by user [8mha:////4C+RzKgWyO49TbLkHnIaiOjSo6AQdkn++EA3bnXLG0NwAAAAmB+LCAAAAAAAAP9b85aBtbiIQTGjNKU4P08vOT+vOD8nVc83PyU1x6OyILUoJzMv2y+/JJUBAhiZGBgqihhk0NSjKDWzXb3RdlLBUSYGJk8GtpzUvPSSDB8G5tKinBIGIZ+sxLJE/ZzEvHT94JKizLx0a6BxUmjGOUNodHsLgAy2EgYe/dLi1CL9lMTs4oxEAMbOizvBAAAA[0mdaksha
Building in workspace /var/lib/jenkins/workspace/GCPApplicationDeploy
 > git rev-parse --is-inside-work-tree # timeout=10
Fetching changes from the remote Git repository
 > git config remote.origin.url https://github.com/daksha25/GCPDeployment.git # timeout=10
Fetching upstream changes from https://github.com/daksha25/GCPDeployment.git
 > git --version # timeout=10
using GIT_ASKPASS to set credentials 
 > git fetch --tags --progress https://github.com/daksha25/GCPDeployment.git +refs/heads/*:refs/remotes/origin/*
 > git rev-parse refs/remotes/origin/master^{commit} # timeout=10
 > git rev-parse refs/remotes/origin/origin/master^{commit} # timeout=10
Checking out Revision 3807c3739efb3975530563438e6f98340f7422e0 (refs/remotes/origin/master)
 > git config core.sparsecheckout # timeout=10
 > git checkout -f 3807c3739efb3975530563438e6f98340f7422e0
Commit message: "Update Home.xhtml"
 > git rev-list --no-walk 3807c3739efb3975530563438e6f98340f7422e0 # timeout=10
[GCPApplicationDeploy] $ /bin/sh -xe /tmp/jenkins412437019933019478.sh
+ mvn clean install
[[1;34mINFO[m] Scanning for projects...
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m------------------------------------------------------------------------[m
[[1;34mINFO[m] [1mBuilding Pid_G_v8.0 0.0.1-SNAPSHOT[m
[[1;34mINFO[m] [1m------------------------------------------------------------------------[m
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-clean-plugin:2.5:clean[m [1m(default-clean)[m @ [36mPid_G_v8.0[0;1m ---[m
[[1;34mINFO[m] Deleting /var/lib/jenkins/workspace/GCPApplicationDeploy/target
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-resources-plugin:2.6:resources[m [1m(default-resources)[m @ [36mPid_G_v8.0[0;1m ---[m
[[1;33mWARNING[m] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
[[1;34mINFO[m] Copying 3 resources
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-compiler-plugin:3.6.1:compile[m [1m(default-compile)[m @ [36mPid_G_v8.0[0;1m ---[m
[[1;34mINFO[m] Changes detected - recompiling the module!
[[1;33mWARNING[m] File encoding has not been set, using platform encoding UTF-8, i.e. build is platform dependent!
[[1;34mINFO[m] Compiling 24 source files to /var/lib/jenkins/workspace/GCPApplicationDeploy/target/classes
[[1;34mINFO[m] /var/lib/jenkins/workspace/GCPApplicationDeploy/src/com/DAO/ErrorRepositoryDAoImpl.java: /var/lib/jenkins/workspace/GCPApplicationDeploy/src/com/DAO/ErrorRepositoryDAoImpl.java uses unchecked or unsafe operations.
[[1;34mINFO[m] /var/lib/jenkins/workspace/GCPApplicationDeploy/src/com/DAO/ErrorRepositoryDAoImpl.java: Recompile with -Xlint:unchecked for details.
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-resources-plugin:2.6:testResources[m [1m(default-testResources)[m @ [36mPid_G_v8.0[0;1m ---[m
[[1;33mWARNING[m] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
[[1;34mINFO[m] skip non existing resourceDirectory /var/lib/jenkins/workspace/GCPApplicationDeploy/src/test/resources
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-compiler-plugin:3.6.1:testCompile[m [1m(default-testCompile)[m @ [36mPid_G_v8.0[0;1m ---[m
[[1;34mINFO[m] No sources to compile
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-surefire-plugin:2.12.4:test[m [1m(default-test)[m @ [36mPid_G_v8.0[0;1m ---[m
[[1;34mINFO[m] No tests to run.
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-war-plugin:3.0.0:war[m [1m(default-war)[m @ [36mPid_G_v8.0[0;1m ---[m
[[1;34mINFO[m] Packaging webapp
[[1;34mINFO[m] Assembling webapp [Pid_G_v8.0] in [/var/lib/jenkins/workspace/GCPApplicationDeploy/target/Pid_G_v8.0-0.0.1-SNAPSHOT]
[[1;34mINFO[m] Processing war project
[[1;34mINFO[m] Copying webapp resources [/var/lib/jenkins/workspace/GCPApplicationDeploy/WebContent]
[[1;34mINFO[m] Webapp assembled in [136 msecs]
[[1;34mINFO[m] Building war: /var/lib/jenkins/workspace/GCPApplicationDeploy/target/infybank.war
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-install-plugin:2.4:install[m [1m(default-install)[m @ [36mPid_G_v8.0[0;1m ---[m
[[1;34mINFO[m] Installing /var/lib/jenkins/workspace/GCPApplicationDeploy/target/infybank.war to /var/lib/jenkins/.m2/repository/Pid_G_v8/0/Pid_G_v8.0/0.0.1-SNAPSHOT/Pid_G_v8.0-0.0.1-SNAPSHOT.war
[[1;34mINFO[m] Installing /var/lib/jenkins/workspace/GCPApplicationDeploy/pom.xml to /var/lib/jenkins/.m2/repository/Pid_G_v8/0/Pid_G_v8.0/0.0.1-SNAPSHOT/Pid_G_v8.0-0.0.1-SNAPSHOT.pom
[[1;34mINFO[m] [1m------------------------------------------------------------------------[m
[[1;34mINFO[m] [1;32mBUILD SUCCESS[m
[[1;34mINFO[m] [1m------------------------------------------------------------------------[m
[[1;34mINFO[m] Total time: 5.114 s
[[1;34mINFO[m] Finished at: 2018-10-25T09:36:51Z
[[1;34mINFO[m] Final Memory: 21M/244M
[[1;34mINFO[m] [1m------------------------------------------------------------------------[m
+ docker build -t daksha25/infybankapp:5 .
Sending build context to Docker daemon  91.28MB
Step 1/5 : FROM tomcat:8.5
 ---> 05af71dd9251
Step 2/5 : COPY /target/infybank.war /usr/local/tomcat/webapps
 ---> d6f0e5e97d16
Step 3/5 : WORKDIR /usr/local/tomcat
 ---> Running in 2ee7d8e387de
Removing intermediate container 2ee7d8e387de
 ---> 2df76fde078e
Step 4/5 : RUN chmod +x bin/catalina.sh
 ---> Running in ab161b7a83c6
Removing intermediate container ab161b7a83c6
 ---> 545964c946f2
Step 5/5 : CMD ["bin/catalina.sh", "run"]
 ---> Running in a2dcf7a3b38a
Removing intermediate container a2dcf7a3b38a
 ---> 7349c754b80b
Successfully built 7349c754b80b
Successfully tagged daksha25/infybankapp:5
Docker Build
Docker Build: building image at path /var/lib/jenkins/workspace/GCPApplicationDeploy
Step 1/5 : FROM tomcat:8.5


 ---> 05af71dd9251

Step 2/5 : COPY /target/infybank.war /usr/local/tomcat/webapps


 ---> Using cache

 ---> d6f0e5e97d16

Step 3/5 : WORKDIR /usr/local/tomcat


 ---> Using cache

 ---> 2df76fde078e

Step 4/5 : RUN chmod +x bin/catalina.sh


 ---> Using cache

 ---> 545964c946f2

Step 5/5 : CMD ["bin/catalina.sh", "run"]


 ---> Using cache

 ---> 7349c754b80b

Successfully built 7349c754b80b

Tagging built image with daksha25/infybankapp:5
Docker Build Response : 7349c754b80b
Pushing [daksha25/infybankapp:5]
The push refers to repository [docker.io/daksha25/infybankapp]
ded5ea358f5a: Preparing
1d5eb72c3fbb: Preparing
1a9d06dd524f: Preparing
de6d5c01d209: Preparing
4c67d93ae2ce: Preparing
b0b6904b7998: Preparing
ceaed1136256: Preparing
923bc9a5d019: Preparing
185c62a48a71: Preparing
d683471ab65a: Preparing
0f25831f224d: Preparing
08a01612ffca: Preparing
8bb25f9cdc41: Preparing
f715ed19c28b: Preparing
b0b6904b7998: Waiting
ceaed1136256: Waiting
923bc9a5d019: Waiting
185c62a48a71: Waiting
d683471ab65a: Waiting
0f25831f224d: Waiting
08a01612ffca: Waiting
8bb25f9cdc41: Waiting
f715ed19c28b: Waiting
1a9d06dd524f: Layer already exists
4c67d93ae2ce: Layer already exists
de6d5c01d209: Layer already exists
ded5ea358f5a: Layer already exists
1d5eb72c3fbb: Pushing [>                                                  ]  264.7kB/24.22MB
1d5eb72c3fbb: Pushing [=>                                                 ]  526.8kB/24.22MB
b0b6904b7998: Layer already exists
ceaed1136256: Layer already exists
923bc9a5d019: Layer already exists
185c62a48a71: Layer already exists
1d5eb72c3fbb: Pushing [===>                                               ]  1.838MB/24.22MB
1d5eb72c3fbb: Pushing [========>                                          ]  3.935MB/24.22MB
1d5eb72c3fbb: Pushing [============>                                      ]  6.294MB/24.22MB
d683471ab65a: Layer already exists
1d5eb72c3fbb: Pushing [================>                                  ]  7.867MB/24.22MB
08a01612ffca: Layer already exists
0f25831f224d: Layer already exists
8bb25f9cdc41: Layer already exists
1d5eb72c3fbb: Pushing [===================>                               ]   9.44MB/24.22MB
1d5eb72c3fbb: Pushing [========================>                          ]   11.8MB/24.22MB
1d5eb72c3fbb: Pushing [=============================>                     ]  14.16MB/24.22MB
f715ed19c28b: Layer already exists
1d5eb72c3fbb: Pushing [================================>                  ]  15.73MB/24.22MB
1d5eb72c3fbb: Pushing [=====================================>             ]  18.09MB/24.22MB
1d5eb72c3fbb: Pushing [==========================================>        ]  20.45MB/24.22MB
1d5eb72c3fbb: Pushing [===============================================>   ]  22.81MB/24.22MB
1d5eb72c3fbb: Pushing [==================================================>]  24.23MB
1d5eb72c3fbb: Pushed
5: digest: sha256:a5a9d6e52b84c0cfacfb084c79adaeb78f2649b66642d6c543e640ebcd148969 size: 3256
Cleaning local images [7349c754b80b]
Docker Build Done
[GCPApplicationDeploy] $ /bin/sh -xe /tmp/jenkins7023754508576919230.sh
+ gcloud container clusters create bankappdeploy --zone us-west1-b
WARNING: Starting in 1.12, new clusters will have basic authentication disabled by default. Basic authentication can be enabled (or disabled) manually using the `--[no-]enable-basic-auth` flag.
WARNING: Starting in 1.12, new clusters will not have a client certificate issued. You can manually enable (or disable) the issuance of the client certificate using the `--[no-]issue-client-certificate` flag.
WARNING: Currently VPC-native is not the default mode during cluster creation. In the future, this will become the default mode and can be disabled using `--no-enable-ip-alias` flag. Use `--[no-]enable-ip-alias` flag to suppress this warning.
WARNING: Starting in 1.12, default node pools in new clusters will have their legacy Compute Engine instance metadata endpoints disabled by default. To create a cluster with legacy instance metadata endpoints disabled in the default node pool, run `clusters create` with the flag `--metadata disable-legacy-endpoints=true`.
This will enable the autorepair feature for nodes. Please see https://cloud.google.com/kubernetes-engine/docs/node-auto-repair for more information on node autorepairs.
WARNING: Starting in Kubernetes v1.10, new clusters will no longer get compute-rw and storage-ro scopes added to what is specified in --scopes (though the latter will remain included in the default --scopes). To use these scopes, add them explicitly to --scopes. To use the new behavior, set container/new_scopes_behavior property (gcloud config set container/new_scopes_behavior true).
Creating cluster bankappdeploy in us-west1-b...
........................................................................................................................................done.
Created [https://container.googleapis.com/v1/projects/ci-cd-poc-218510/zones/us-west1-b/clusters/bankappdeploy].
To inspect the contents of your cluster, go to: https://console.cloud.google.com/kubernetes/workload_/gcloud/us-west1-b/bankappdeploy?project=ci-cd-poc-218510
kubeconfig entry generated for bankappdeploy.
NAME           LOCATION    MASTER_VERSION  MASTER_IP      MACHINE_TYPE   NODE_VERSION  NUM_NODES  STATUS
bankappdeploy  us-west1-b  1.9.7-gke.6     35.185.233.28  n1-standard-1  1.9.7-gke.6   3          RUNNING
+ gcloud container clusters get-credentials bankappdeploy --zone us-west1-b --project ci-cd-poc-218510
Fetching cluster endpoint and auth data.
kubeconfig entry generated for bankappdeploy.
+ kubectl run appdeploy --image=daksha25/infybankapp:5 --port=8080
kubectl run --generator=deployment/apps.v1beta1 is DEPRECATED and will be removed in a future version. Use kubectl create instead.
deployment.apps/appdeploy created
+ kubectl get deployment
NAME        DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
appdeploy   1         1         1            0           0s
+ kubectl get pods
NAME                         READY   STATUS    RESTARTS   AGE
appdeploy-58bf5b8f5b-cxhnz   0/1     Pending   0          1s
+ kubectl expose deployment appdeploy --type=LoadBalancer
service/appdeploy exposed
+ kubectl get services appdeploy
NAME        TYPE           CLUSTER-IP      EXTERNAL-IP   PORT(S)          AGE
appdeploy   LoadBalancer   10.19.247.103   <pending>     8080:32457/TCP   0s
+ kubectl get services
NAME         TYPE           CLUSTER-IP      EXTERNAL-IP   PORT(S)          AGE
appdeploy    LoadBalancer   10.19.247.103   <pending>     8080:32457/TCP   0s
kubernetes   ClusterIP      10.19.240.1     <none>        443/TCP          59s
Finished: SUCCESS
